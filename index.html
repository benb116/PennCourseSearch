<!doctype html>
<html ng-app="PCSApp">
	<head>
		<title>PennCourseSearch</title>
		<meta charset="UTF-8">
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css">
        <link rel="stylesheet" type="text/css" href="/css/index.css"/>
        <link rel="stylesheet" type="text/css" href="/css/plugins.css">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0-rc.0/angular.min.js"></script>
        <script async type="text/javascript" src="/js/html2canvas.js"></script>
        <script async type="text/javascript" src="js/jquery.tooltipster.min.js"></script>
        <script async type="text/javascript" src="/js/sweetalert.min.js"></script>
        <script type="text/javascript" src="/js/jquery.leanModal.min.js"></script>
        <!-- <script type="text/javascript" src="/js/init.js"></script> -->
        <!-- <script type="text/javascript" src="/js/main.js"></script> -->
        <script type="text/javascript" src="https://rawgit.com/grevory/angular-local-storage/master/dist/angular-local-storage.min.js"></script>
        <!-- <script type="text/javascript" src="/js/menu.js"></script> -->
        <script type="text/javascript" src="/js/angular.js"></script>
        <!-- <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-49014722-4', 'auto');
            ga('send', 'pageview', '/home');
        </script> -->
	</head>
    <body ng-controller="CourseController">
        <div id="MenuBar">
            <a rel="leanModal" href="#ModalWindow">About</a>
        </div>
        <div id="Top">
    	   <h1>PennCourseSearch</h1>
    	   <span>{{ subtitle }}</span>
            <form>
                <span>Search by:</span>
    			<select id="searchSelect" style="margin-right:1em;" ng-model="searchType" ng-change="searchChange()">
                    <option selected="selected" value="courseIDSearch">Course ID</option>
                    <option value="keywordSearch">Keywords</option>
                    <option value="instSearch">Instructor</option>
                </select>

                <input id="CSearch" type="text" name="courseSearch" autocomplete="off" placeholder="Search for courses..." autofocus="autofocus" ng-model="search" ng-change="searchChange()">

                <!-- <span style="margin-left:1em;" class="OpenSec">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span> = Open </span><span class="ClosedSec">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span> = Closed </span> -->
                
                <span style="margin-left:1em;">Schedule:</span><select id="schedSelect" ng-model="currentSched" ng-change="schedChange()">
                    <option ng-repeat="schedName in schedules" value="{{schedName}}">{{schedName}}</option>
                </select>
                
                <div ng-class="{'hide': !loading, '': loading}" class="spinner"></div>
    		</form>
            <div id="MenuButtons">
                <ul>
                  <li>
                    Schedule <i class="fa fa-caret-down"></i>
                    <ul>
                      <a ng-click="sched.Download()" rel="leanModal" href="#SchedModal"><li>Download</li></a>
                      <li ng-click="sched.Recolor()">Recolor</li>
                      <li ng-click="sched.New()" id="NewSchedBtn">New</li>
                      <li ng-click="sched.Duplicate()" id="DupSchedBtn">Duplicate</li>
                      <li ng-click="sched.Rename()" id="RenSchedBtn">Rename</li>
                      <li ng-click="sched.Clear()" id="ClearAllBtn">Clear</li>
                      <li ng-click="sched.Delete()" id="DeleteSchedBtn">Delete</li>
                    </ul>
                  </li>
                  <li onclick="StarHandle('show');"><span>Show Stars</span></li>
                  <li onclick="$('#FilterSearch').slideToggle(200);"><span>Filter</span></li>
                  <li ng-click="clearSearch()"><span>Clear Search</span></li>
                </ul>
            </div>
            <div id="ModalWindow" class="Modal">
                <h2>About PennCourseSearch</h2>
                <p>PennCourseSearch is a cleaner and simpler way for Quakers to find classes and make schedules. While this is not a full replacement for Penn InTouch, it acts as an improvement of the "Course Search" and "Mock Schedules" features. Search across departments, courses, and sections and refine searches by specific criteria.</p>
                <h2>How do I search for courses?</h2>
                <p>Just type a course in the search box. Then you can click on the results to see more in-depth information about different sections. If you want to filter the results, click on the filter button and change your options. You can also choose to search by course description or instructor in the menu bar.</p>
                <h2>How do I change my schedule?</h2>
                <p>To add a section to your schedule, click on its '+' icon. To remove a course, mouse over it and click the 'X' in the top left corner. You can see more options in the "Schedule" menu, including changing the colors as well as creating and deleting schedules.</p>
                <br>
                <div class="ModalThird">
                    <span>Want to give <a href="http://benbernstein.me/" target="_blank">Ben</a> free money?</span><a href="{{ paymentNote }}" target="_blank"><span class="logo"></span><span class="label">Venmo Me</span></a>
                </div>
                <div class="ModalThird">
                    <span>Questions or comments?</span>
                    <a href="mailto:bernsb@seas.upenn.edu?Subject=PennCourseSearch"><span><i class="fa fa-envelope-o" style="padding-right:0.5em;"></i>Email Me</span></a>
                </div>
                 <div class="ModalThird">
                    <span>Want to see all of PCS's code?</span>
                    <a href="https://github.com/benb116/PennCourseSearch"><span><i class="fa fa-github" style="padding-right:0.25em;"></i>View on Github</span></a>
                </div>
                <a class="modal_close"><i class="fa fa-times"></i></a>
            </div>
            <div id="SchedModal" class="Modal">
                <img id="SchedImage" src="">
                <span>Right click the image to save it.</span>
                <a class="modal_close"><i class="fa fa-times"></i></a>
            </div>
		</div>
        <div id="BottomResults">
        	<div id="CourseList">
                <div ng-show="(courses.length)">
                    <span style="margin-left:0.5em;margin-right:0.5em;">Sort by: </span><select id="sortCourses" ng-model="courseSort" style="margin-bottom:0.5em;">
                        <option value="idDashed">Course Number</option>
                        <option value="-revs.cQ">Quality (high to low)</option>
                        <option value="revs.cD">Difficulty (easy to hard)</option>
                        <option value="-revs.QDratio">Good and Easy</option>
                    </select>
                </div>
                <ul>
                    <!-- | orderBy:'-courseRevs.cQ' -->
                     <li ng-repeat="course in courses | orderBy:courseSort" id="{{ course.idDashed }}" ng-class="{{course.courseReqs}}" ng-click="get.Sections(course.idDashed)" ng-show="(!checkArr.length) || ((course.courseReqs.indexOf(checkArr[0]) > -1) && (!checkArr[1] || course.courseReqs.indexOf(checkArr[1]) > -1))">
                        <span class="PCR Qual" style="background:rgba(45, 160, 240, {{ course.pcrQShade }});color: {{ course.pcrQColor }} ">{{ course.revs.cQ | number:2}}</span>
                        <span class="PCR Diff" style="background:rgba(231, 76, 60, {{ course.pcrDShade }});color: {{ course.pcrDColor }} ">{{ course.revs.cD | number:2}}</span>
                        <span class="cID">{{ course.idSpaced }}</span>
                        <span class="cTitle">{{ course.courseTitle }}</span>
                    </li>
                </ul>   
            </div>
        	<div id="SectionCol">
        		<div id="Sections">
                    <span id="CourseTitle">{{ currentCourse.idSpaced }} {{ currentCourse.title }}</span>
                    <div id="SectionList">
                        <ul>
                            <li ng-repeat="section in sections" id="{{ section.idDashed }}" class="{{section.actType}}" ng-show="(showAct == section.actType || showAct == 'noFilter') && (section.isOpen || showClosed)">
                                <i class="fa" ng-class="{'fa-plus': !section.isScheduled, 'fa-times': section.isScheduled}" ng-click="sched.AddRem(section.idDashed)"></i>
                                <span class="statusClass" ng-class="{'openSec': section.isOpen, 'closedSec': !section.isOpen}"></span>
                                <span class="PCR Qual" style="background:rgba(45, 160, 240, {{ section.pcrQShade }});color: {{ section.pcrQColor }} ">{{ section.revs.cI | number:2}}</span>
                                <!-- <span class="PCR Diff" style="background:rgba(231, 76, 60, {{ section.pcrDShade }});color: {{ section.pcrDColor }} ">{{ section.revs.cD | number:2}}</span> -->
                                <span ng-click="get.SectionInfo(section.idDashed)">{{ section.idSpaced}} - {{ section.timeInfo }} </span>
                                <i class="fa" ng-class="{'fa-star': section.isStarred, 'fa-star-o': !section.isStarred}" ng-click="star(section.idDashed)"></i>
                            </li>
                        </ul>
                    </div>
                </div>
        		<div id="SectionInfo">
                    <span ng-show="sectionInfo.fullID"> {{sectionInfo.fullID}} - {{sectionInfo.title}} <br><br></span>
                    <span ng-show="sectionInfo.instructor"> {{'Instructor: '+ sectionInfo.instructor}} <br><br></span>
                    <span ng-show="sectionInfo.timeInfo"><span ng-repeat="meeting in sectionInfo.timeInfo"> {{meeting}} <br></span><br></span>
                    <span ng-show="sectionInfo.description">Description: {{sectionInfo.description}} <br><br></span>
                    <span ng-show="sectionInfo.openClose"> Status: {{sectionInfo.openClose}} <br><br></span>
                    <span ng-show="sectionInfo.reqsFilled.length"><span ng-repeat="req in sectionInfo.reqsFilled"> {{req}}<br></span><br></span>
                    <span ng-show="sectionInfo.prereqs"> Prerequisites: {{sectionInfo.prereqs}} <br><br></span>
                    <span ng-show="sectionInfo.associatedType"> Associated {{sectionInfo.associatedType}}: <br></span>
                    <span ng-repeat="asscSec in sectionInfo.associatedSections" id="{{asscSec.replace(' ', '-').replace(' ', '-')}}" ng-click="sectionClick(asscSec.replace(' ', '-').replace(' ', '-'))"> {{asscSec}} <br></span>

                </div>
        	</div>
        	<div id="InfoPanel">
                <div id="FilterSearch">
                    <div class="FilterPanel">
                        <div class="FilterBlock">
                            <span>Filter by requirement (up to two)</span>
                            <div id="reqFilter" ng-model="showReq">
                                <!-- <option value="noFilter">Filter by requirement</option> -->
                                <input type="checkbox" ng-disabled="(!check.MDS && checkArr.length >= 2)" ng-model="check.MDS">Society Sector<br>
                                <input type="checkbox" ng-disabled="(!check.MDH && checkArr.length >= 2)" ng-model="check.MDH">History &amp; Tradition Sector<br>
                                <input type="checkbox" ng-disabled="(!check.MDA && checkArr.length >= 2)" ng-model="check.MDA">Arts &amp; Letters Sector<br>
                                <input type="checkbox" ng-disabled="(!check.MDO && checkArr.length >= 2)" ng-model="check.MDO">Humanities &amp; Social Science Sector<br>
                                <input type="checkbox" ng-disabled="(!check.MDL && checkArr.length >= 2)" ng-model="check.MDL">Living World Sector<br>
                                <input type="checkbox" ng-disabled="(!check.MDP && checkArr.length >= 2)" ng-model="check.MDP">Physical World Sector<br>
                                <input type="checkbox" ng-disabled="(!check.MDN && checkArr.length >= 2)" ng-model="check.MDN">Natural Science &amp; Math Sector<br>
                                <input type="checkbox" ng-disabled="(!check.MWC && checkArr.length >= 2)" ng-model="check.MWC">Writing Requirement<br>
                                <input type="checkbox" ng-disabled="(!check.MQS && checkArr.length >= 2)" ng-model="check.MQS">College Quantitative Data Analysis Req.<br>
                                <input type="checkbox" ng-disabled="(!check.MFR && checkArr.length >= 2)" ng-model="check.MFR">Formal Reasoning Course<br>
                                <input type="checkbox" ng-disabled="(!check.MC1 && checkArr.length >= 2)" ng-model="check.MC1">Cross Cultural Analysis<br>
                                <input type="checkbox" ng-disabled="(!check.MC2 && checkArr.length >= 2)" ng-model="check.MC2">Cultural Diversity in the US
                            </div>
                        </div>
                    </div>
                    <div class="FilterPanel">
                        <div class="FilterBlock">
                            <input type="checkbox" id="closedCheck" value="ClosedSec" ng-model="showClosed" checked>Show closed sections
                        </div>
                        <div class="FilterBlock">
                            <select id="actFilter" ng-model="showAct">
                                <option value="noFilter">Filter by section type</option>
                                <option value="LEC">Lecture</option>
                                <option value="REC">Recitation</option>
                                <option value="LAB">Laboratory</option>
                                <option value="IND">Independent Study</option>
                                <option value="SEM">Seminar</option>
                                <option value="SRT">Senior Thesis</option>
                                <option value="STU">Studio</option>
                                <option value="CLN">Clinic</option>
                                <option value="PRC">SCUE Preceptorial</option>
                                <option value="PRO">NSO Proseminar</option>
                                <option value="ONL">Online Course</option>
                            </select>
                        </div>
                        
                        <div class="FilterBlock">
                            <select id="proFilter" ng-model="showPro">
                                <option value="noFilter">Filter by program</option>
                                <option value="MSL">ABCS Courses</option>
                                <option value="BFS">Ben Franklin Seminars</option>
                                <option value="CGS">College of Liberal &amp; Professional Studies</option>
                                <option value="CRS">Critical Writing Seminars</option>
                                <option value="FORB">Freshman-Friendly courses</option>
                                <option value="MFS">Freshman Seminars</option>
                                <option value="PLC">Penn Language Center</option>
                                <option value="SS">Summer Sessions I &amp; II</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div id="SchedGraph">
            		<div id="TimeCol" style="position:relative;"></div>
                    <div id="Schedule" style="position:relative;"></div>
                </div>
        	</div>
        </div>
        <!-- <div style="display:none" id="StatusMessage">{{ statusMessage }}</div> -->
    </body>
</html>